<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->

<html  class="no-js"  lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>NadFact</title>
    <meta name="description" content="NadFact project">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-icon.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
      <link rel=" shortcut icon" type="image/png" href="/ERPPro/images/logo2.png">
    
     <script
  src="https://code.jquery.com/jquery-3.6.4.js"
  integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
  crossorigin="anonymous"></script>
 
    <link rel="stylesheet" th:href="@{/vendors/font-awesome/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/vendors/themify-icons/css/themify-icons.css}">
    <link rel="stylesheet" th:href="@{/vendors/flag-icon-css/css/flag-icon.min.css}">
    <link rel="stylesheet" th:href="@{/vendors/selectFX/css/cs-skin-elastic.css}">
    <link rel="stylesheet" th:href="@{/vendors/jqvmap/dist/jqvmap.min.css}">

<link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">

    <link rel="stylesheet" th:href="@{/assets/css/style.css}">
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

</head>

<body>


    <!-- Left Panel -->

    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default" style="">

            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars"></i>
                </button>
               <a class="navbar-brand" href="/ERPPro/user/dashbord"><img th:src="@{/images/logo.png}" alt="Logo"></a>
<a class="navbar-brand hidden" href="/ERPPro/user/dashbord"><img th:src="@{/images/logo2.png}" alt="Logo"></a>

            </div>

            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active emptype">
                        <a href="/ERPPro/user/dashbord"> <i class="menu-icon uil uil-dashboard"></i>Dashboard</a>
                    </li>
                        <li class="active">
                        <a href="/ERPPro/user/Profile" id="profillink"> <i class="menu-icon uil uil-user"></i>Profil</a>
                    </li>
                    
                    
                        <li class="active emptype" id="adminli">
                        
                        <a href="/ERPPro/admin/Users"> <i class="menu-icon fa-solid fa-users" style="margin-top: 8px"></i>Users</a>
                    </li>
                     <li class="active emptype">
                        <a href="/ERPPro/user/Services"> <i class="menu-icon fa-brands fa-product-hunt" style="margin-top: 8px"></i>Services</a>
                    </li>
                    
                     <li class="active emptype">
                        <a  href="/ERPPro/user/clients"> <i class="menu-icon uil  uil-user-square" ></i>Clients</a>
                    </li>
                    
                        <li class="active emptype">
                        <a href="/ERPPro/user/factures"> <i class="menu-icon uil uil-invoice"></i>Factures</a>
                    </li>
                     
                    
                     
                        <li class="active" id="facturecl">
                        <a href="/ERPPro/client/FactureClient" id="facturecllink"> <i class="menu-icon uil uil-invoice"></i>Factures</a>
                    </li>
                  
                       
                        <li class="active emptype">
                        <a href="/ERPPro/user/reglements"> <i class="menu-icon fa-solid fa-money-bill-transfer" style="margin-top: 8px"></i>Reglements</a>
                    </li>

			 <li class="active emptype">
                        <a href="/ERPPro/user/factureret">  <i class="menu-icon fa-regular fa-file" style="margin-top: 8px"></i>Retenues</a>
                    </li>
                    
                    
                             <li class="active emptype">
                        <a href="/ERPPro/user/fournisseur"><i class="menu-icon fa-solid fa-truck-field" style="margin-top: 8px"></i>Fournisseur</a>
                    </li>
                    
                      <li class="active emptype" id="dememp">
                        <a href="/ERPPro/user/DemandeDep"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17"  fill="#fff" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"  viewBox="0 0 70 70" id="edit" class="icon icon-tabler icons-tabler-outline icon-tabler-report-search" style="color:#fff;margin-right: 38px">
                        <path d="M45.338623,11.0065918H14.4987793c-1.9287109,0-3.4980469,1.5639648-3.4980469,3.4868164v41.0019531
	c0,1.9287109,1.5693359,3.4980469,3.4980469,3.4980469H45.338623c1.9287109,0,3.4980469-1.5693359,3.4980469-3.4980469V42.144043
	l9.1123047-9.1125488c1.4003906-1.3999023,1.4003906-3.6777344,0-5.0776367l-2.4541016-2.4545898
	c-1.4003906-1.4003906-3.6777344-1.4003906-5.078125,0l-1.5800781,1.5801392V14.4934082
	C48.8366699,12.5705566,47.267334,11.0065918,45.338623,11.0065918z M40.456543,47.6958008l-4.7038574-4.7038574
	L48.43927,30.3049927l4.7040405,4.7040405L40.456543,47.6958008z M34.9246826,44.9920654l3.5315552,3.5315552l-4.5199585,0.9883423
	L34.9246826,44.9920654z M46.8366699,55.4953613c0,0.8261719-0.671875,1.4980469-1.4980469,1.4980469H14.4987793
	c-0.8261719,0-1.4980469-0.671875-1.4980469-1.4980469V14.4934082c0-0.8198242,0.671875-1.4868164,1.4980469-1.4868164H45.338623
	c0.8261719,0,1.4980469,0.6669922,1.4980469,1.4868164v14.5860596l-8.0836182,8.0838623H18.7185059c-0.5527344,0-1,0.4477539-1,1
	s0.4472656,1,1,1h18.0346069l-3.121521,3.121582c-0.0849609,0.0846558-0.1463623,0.1864624-0.1954956,0.2943726
	c-0.0147095,0.0321045-0.0249634,0.0636597-0.0360107,0.0968628c-0.0115967,0.034668-0.0303345,0.0664673-0.0380249,0.102417
	l-0.156189,0.7143555H18.7185059c-0.5527344,0-1,0.4477539-1,1s0.4472656,1,1,1h14.0501099l-0.9464722,4.3291016H18.7185059
	c-0.5527344,0-1,0.4477539-1,1s0.4472656,1,1,1H32.626709c0.0712891,0,0.1425781-0.0073242,0.2138672-0.0229492l7.8300781-1.7119141
	c0.036377-0.0079956,0.0687256-0.0269775,0.1038208-0.0388794c0.0325928-0.0109863,0.0634766-0.0211792,0.0949707-0.0355835
	c0.1079712-0.0493774,0.2099609-0.1108398,0.2943726-0.1955566l5.6728516-5.6730347V55.4953613z M51.8308105,26.9133301
	c0.6210938-0.6201172,1.6289063-0.6201172,2.25,0l2.4541016,2.4545898c0.6201172,0.6201172,0.6201172,1.6293945,0,2.2495117
	l-1.9775391,1.9775391l-4.7041016-4.7041016L51.8308105,26.9133301z"></path><path d="M18.7185059 20.1750488h22.4042969c.5527344 0 1-.4477539 1-1s-.4472656-1-1-1H18.7185059c-.5527344 0-1 .4477539-1 1S18.1657715 20.1750488 18.7185059 20.1750488zM18.7185059 26.5046387h22.4042969c.5527344 0 1-.4477539 1-1s-.4472656-1-1-1H18.7185059c-.5527344 0-1 .4477539-1 1S18.1657715 26.5046387 18.7185059 26.5046387zM18.7185059 32.8337402h22.4042969c.5527344 0 1-.4477539 1-1s-.4472656-1-1-1H18.7185059c-.5527344 0-1 .4477539-1 1S18.1657715 32.8337402 18.7185059 32.8337402z"></path></svg>Cr√©er Depense</a>
                    </li>
                    
                      <li class="active emptype" id="demmanger">
                        <a href="/ERPPro/user/Demandesstatus"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-report-search" style="color:#fff;margin-right: 38px">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697" />
        <path d="M18 12v-5a2 2 0 0 0 -2 -2h-2" />
        <path d="M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" />
        <path d="M8 11h4" />
        <path d="M8 15h3" />
        <path d="M16.5 17.5m-2.5 0a2.5 2.5 0 1 0 5 0a2.5 2.5 0 1 0 -5 0" />
        <path d="M18.5 19.5l2.5 2.5" />
    </svg>Demandes Depense</a>
                    </li>
                    
                      <li class="active emptype">
<a href="/ERPPro/user/boncommande">
    <svg id="Layer_3" fill="#fff" width="17" height="17" stroke="#fff"  style="color:#fff;margin-right: 38px;" version="1.1" viewBox="0 0 500 500" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g>
            <g>
                <path  d="M345.1,307.2v141.6H71.3v-356h131L180,120.1H98.7v301.3h219.1V313L345.1,307.2z"/>
            </g>
        </g>
        <g>
            <g>
                <path d="M345.1,307.2v141.6H71.3v-356h131L180,120.1H98.7v301.3h219.1V313L345.1,307.2z"/>
            </g>
        </g>
        <g>
            <rect height="27.4" width="136.9" x="139.7" y="339.2"/>
        </g>
        <g>
            <polyline points="235.6,311.8 139.7,311.8 139.7,284.4 204.8,284.4  "/>
        </g>
        <g>
            <polyline points="177.4,257 139.7,257 139.7,229.6 165.9,229.6  "/>
        </g>
        <g>
            <path d="M291.8,328.8c-76.2,0-138.1-62-138.1-138.1c0-76.2,62-138.1,138.1-138.1c76.2,0,138.1,62,138.1,138.1   C429.9,266.9,367.9,328.8,291.8,328.8z M291.8,79.9c-61.1,0-110.7,49.7-110.7,110.8c0,61.1,49.7,110.7,110.7,110.7   c61.1,0,110.8-49.7,110.8-110.7C402.5,129.6,352.8,79.9,291.8,79.9z"/>
        </g>
        <g>
            <polygon points="271.2,255.5 204.7,189 224.1,169.6 271.2,216.8 352.4,135.6 371.8,154.9  "/>
        </g>
    </svg>
    BC
</a>
                    </li>
                    
                         
                    
                       
                    
                        <li class="active emptype">
                        <a href="/ERPPro/user/bonLivraison"> <?xml version="1.0" ?><svg fill="#fff" width="17" height="17" stroke="#fff"  style="color:#fff;margin-right: 38px;"  id="Layer_1" version="1.1" viewBox="0 0 500 500" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><polygon points="469.5,359.5 414.8,359.5 414.8,332.1 442.1,332.1 442.1,252.2 418.6,181.5 318.9,181.5 318.9,332.1 332.6,332.1     332.6,359.5 291.6,359.5 291.6,154.1 438.3,154.1 469.5,247.7   "/></g><g><path d="M373.7,400.5c-30.2,0-54.8-24.6-54.8-54.8s24.6-54.8,54.8-54.8c30.2,0,54.8,24.6,54.8,54.8S403.9,400.5,373.7,400.5z     M373.7,318.4c-15.1,0-27.4,12.3-27.4,27.4c0,15.1,12.3,27.4,27.4,27.4c15.1,0,27.4-12.3,27.4-27.4    C401.1,330.7,388.8,318.4,373.7,318.4z"/></g><g><polygon points="318.9,359.5 182.1,359.5 182.1,332.1 291.6,332.1 291.6,126.8 58.9,126.8 58.9,332.1 99.9,332.1 99.9,359.5     31.5,359.5 31.5,99.4 318.9,99.4   "/></g><g><path d="M141,400.5c-30.2,0-54.8-24.6-54.8-54.8S110.8,291,141,291s54.8,24.6,54.8,54.8S171.2,400.5,141,400.5z M141,318.4    c-15.1,0-27.4,12.3-27.4,27.4c0,15.1,12.3,27.4,27.4,27.4s27.4-12.3,27.4-27.4C168.4,330.7,156.1,318.4,141,318.4z"/></g><g><polygon points="168.4,269.3 103.9,204.9 123.3,185.5 168.4,230.6 240.8,158.2 260.2,177.5   "/></g></g></svg></i>BL</a>
                    </li>
                    
                   
                    
                     <li class="active emptype">
                        <a href="/ERPPro/user/Depenses"> <i class="menu-icon fa-solid fa-cart-shopping" style="margin-top: 8px"></i>Depenses</a>
                    </li>
                    
                    
                    
                     
                        <li class="active">
                        <a href="/ERPPro/chat/chat" id="chathref"> <i class="menu-icon fa-solid fa-money-bill-transfer" style="margin-top: 8px"></i>Chat</a>
                    </li>
         
                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>
    </aside><!-- /#left-panel -->

    <!-- Left Panel -->

    <!-- Right Panel -->

    <div id="right-panel" class="right-panel" >

        <!-- Header-->
        <header id="header" class="header" >

            <div class="header-menu">

                <div class="col-sm-7">
                    <a id="menuToggle" class="menutoggle pull-left"><i class="fa fa fa-tasks"></i></a>
                    <div class="header-left">
                       

                   

                    </div>
                </div>

                <div class="col-sm-5">
      <div class="user-area dropdown float-right" style="position: relative;" id="user-area">
    <a href="#" class="dropdown-toggle" id="user-avatar-toggle">
        <img class="user-avatar rounded-circle" src="" alt="User Avatar" id="userimg">
    </a>
    <div class="dropdown-menu" id="user-dropdown-menu" style="display: none; position: absolute; left: -150px; top: 100%; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; min-width: 160px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); z-index: 1000; padding: 5px 0;">
        <a id="dropdownprofile" class="dropdown-item" href="#" style="padding: 10px 20px; color: #333; text-decoration: none; display: flex; align-items: center;">
            <i class="fa fa-user" style="margin-right: 8px;color:blue"></i>Profile
        </a>
       
        <a class="dropdown-item" href="#" style="padding: 10px 20px; color: #333; text-decoration: none; display: flex; align-items: center;" th:onclick="logout(event)">
            <i class="fa fa-sign-out" style="margin-right: 8px;color:blue"></i>D√©connexion
        </a>
    </div>
</div>




                    

                </div>
            </div>

        </header><!-- /header -->
        <!-- Header-->

      

        <div class="content">

		<div layout:fragment="content">
    
	</div>
    </div><!-- /#right-panel -->

    <!-- Right Panel -->
        <script
  src="https://code.jquery.com/jquery-3.6.4.js"
  integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
  crossorigin="anonymous"></script>

    

   


 
    
    
    
   
    
    <script th:inline="javascript">
document.addEventListener('DOMContentLoaded', function() {
	$('#menuToggle').on('click', function(event) {
		$('body').toggleClass('open');
	});
	if(sessionStorage.getItem("email") ==null){
  		window.location.href = '/ERPPro/home/login'
  		}
  
	document.getElementById('user-avatar-toggle').addEventListener('click', function(event) {
	    event.preventDefault(); // Emp√™che le lien de rediriger si n√©cessaire
	    const dropdownMenu = document.getElementById('user-dropdown-menu');
	    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
	});

	// Optionnel : Fermer le menu d√©roulant si on clique en dehors
	document.addEventListener('click', function(event) {
	    const isClickInside = document.getElementById('user-area').contains(event.target);
	    if (!isClickInside) {
	        document.getElementById('user-dropdown-menu').style.display = 'none';
	    }
	});
		
	
	
	document.getElementById('chathref').setAttribute('href', '/ERPPro/chat/chat?email='+sessionStorage.getItem("email"))
	document.getElementById('facturecllink').setAttribute('href', '/ERPPro/client/FactureClient/'+sessionStorage.getItem("id"))
	var loggedInUserImage = sessionStorage.getItem("image")
	
	 var activeLink = document.querySelector(".is-active");

     if (activeLink && !window.location.pathname.includes(activeLink.pathname)  && !window.location.pathname.includes("/ERPPro/user/addfacture") && !window.location.pathname.includes("/ERPPro/user/updatefacture") && !window.location.pathname.includes("/ERPPro/user/addAvoir")) {
         console.log(activeLink.href)
         activeLink.click();
     }
	fetch('/ERPPro/home/downloadImage?name='+loggedInUserImage, {
        method: 'GET',
        
       
    })
    .then(response => response.text())
    .then(data => {
       
        document.getElementById('userimg').src =data
    })
    .catch(error => {
        console.error('Error downloading file:', error);
    });

	const emptyTypeElements = document.querySelectorAll('li.emptype');

	
	fetch('/ERPPro/home/getUserType?email='+sessionStorage.getItem("email"), {
        method: 'GET',
     
       
    })
    .then(response => response.text())
    .then(data => {
       
        if(data =="Client"){
        	document.getElementById('profillink').setAttribute('href', '/ERPPro/client/Profile/'+sessionStorage.getItem("email"))
        	        	document.getElementById('dropdownprofile').setAttribute('href', '/ERPPro/client/Profile/'+sessionStorage.getItem("email"))
        	
            emptyTypeElements.forEach(element => {
                element.style.display = 'none';
            });
            document.getElementById('facturecl').style.display = 'block'
            	document.getElementById('adminli').style.display = 'none'
            	
           
            }
        else{
        	
        	document.getElementById('profillink').setAttribute('href', '/ERPPro/user/Profile/'+sessionStorage.getItem("email"))
                    	document.getElementById('dropdownprofile').setAttribute('href', '/ERPPro/user/Profile/'+sessionStorage.getItem("email"))
            
        	emptyTypeElements.forEach(element => {
                element.style.display = 'block';
            });
        	document.getElementById('facturecl').style.display = 'none'
            	
        	
            }
        if(data =="Manager"){
        
        	document.getElementById('demmanger').style.display = 'block'
        		document.getElementById('dememp').style.display = 'block'
        			document.getElementById('adminli').style.display = 'none'
            }
        else if(data =="Employee"){
        	

        	document.getElementById('demmanger').style.display = 'none'
        		document.getElementById('dememp').style.display = 'block'  
        			document.getElementById('adminli').style.display = 'none'      	
            }
		else if(data =="Admin"){
        	

        	document.getElementById('demmanger').style.display = 'block'
        		document.getElementById('dememp').style.display = 'block'    
        			document.getElementById('adminli').style.display = 'block'    	
            }
      
    })
    .catch(error => {
        console.error('Error downloading file:', error);
    });
	});
</script>

<script>


	function updateImage(imgsrc){
		document.getElementById('userimg').src =imgsrc
		}


	function logout(e){
		e.preventDefault();

		
		 fetch('/ERPPro/home/logout/'+sessionStorage.getItem("email"), {
	         method: 'POST',
	         headers: {
	        	 
			    	 
			    	    },
			    	
	        
	     })
	     .then(response => response.text())
	     .then(data => {
	    	 sessionStorage.removeItem("image");
	    	 sessionStorage.removeItem("token");
	    	 sessionStorage.removeItem("id");
	    	 sessionStorage.removeItem("email");
	    	 window.location.href = '/ERPPro/home/login';

	    	 })
		}
</script>
 <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

	
</body>

</html>
